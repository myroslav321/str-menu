{"version":3,"file":"bundle-main.js","mappings":"AAmHA","sources":["webpack:///./js/menu-plugin/SlideMenu.js","webpack:///./js/menu-plugin/utils/lockScroll.js","webpack:///./js/menu-plugin/utils/getParentNode.js","webpack:///./js/main.js"],"sourcesContent":["import lockScroll from \"./utils/lockScroll\";\nimport getParentNode from \"./utils/getParentNode\";\n\nconst Navigation = () => {\n  const header = document.querySelector('.header');\n  const wrp = document.querySelector('.offset-menu__wrp');\n  const btn = document.querySelector('.offset-menu__control');\n  const close = document.querySelector('.offset-menu__close-button');\n  const links = document.querySelectorAll('.offset-menu__link ');\n  let isLastVisible = false;\n  let isOpen = false;\n  let depth = 0;\n\n  const scroll = lockScroll();\n\n  const open = () => {\n    isOpen = !isOpen;\n    isOpen ? scroll.disable() : scroll.enable();\n    header.classList.toggle('_nav-open', isOpen);\n    document.body.classList.add('_nav-transition');\n  }\n\n  const clearClasses = () => {\n    [...document.querySelectorAll('._sub-2__visible')].forEach(item => {\n      item.classList.remove('_sub-2__visible');\n    });\n    depth = 0;\n  };\n\n  const controlHandler = () => {\n    btn.addEventListener('click', open);\n    close.addEventListener('click', () => {\n      isOpen = !isOpen;\n      isLastVisible = !isLastVisible\n      scroll.enable()\n      header.classList.remove('_nav-open');\n      clearClasses();\n      clearLastLevel();\n    })\n  };\n\n  const handleLastLevel = (html) => {\n    const menu = document.createElement('div');\n    const classList = menu.classList;\n  \n    menu.classList.add('offset-menu__last-level');\n    isLastVisible && menu.classList.add('_show');\n    menu.appendChild(html);\n    wrp.appendChild(menu);\n\n    const timeout = setTimeout(() => {\n      if (!isLastVisible) {\n        isLastVisible = !isLastVisible\n        classList.add('_show');\n      }\n      clearTimeout(timeout)\n    }, 14);\n  };\n\n  const clearLastLevel = () => {\n    const html = wrp.querySelector('.offset-menu__last-level');\n    if (html) {\n      html.remove();\n    }\n  }\n\n  const submenuHandler = () => {\n    document.addEventListener('click', (e) => {\n  \n      const ww = window.innerWidth;\n      if (e.target.dataset.show === 'sub') {\n        depth = 2;\n        const isLastLevel = e.target.nextElementSibling.classList.contains('_level-3');\n\n        if (ww < 992) {\n          e.target.classList.add('_sub-2__visible');\n        } else if (!isLastLevel) {\n          e.target.classList.add('_sub-2__visible');\n        } else {\n          clearLastLevel();\n          handleLastLevel(e.target.nextElementSibling.cloneNode(true));\n        }\n\n        e.preventDefault();\n      }\n\n      if (e.target.dataset.action === 'back') {\n        const parent = getParentNode(e.target, 'offset-menu__list-item');\n        parent.querySelector('._sub-2__visible').classList.remove('_sub-2__visible');\n        isLastVisible = !isLastVisible\n        depth = 1;\n        clearLastLevel();\n      }\n\n      if (e.target.dataset.target)  {\n        e.preventDefault();\n        document.querySelector(`[data-ref='${e.target.dataset.target}']`).classList.add('_sub-2__visible') ;\n        depth = 2;\n        open();\n      }\n\n      header.classList.toggle('_sub-open', depth > 1);\n    })\n  };\n\n  const init = () => {\n    controlHandler();\n    submenuHandler();\n  };\n\n  return {\n    init\n  }\n};\n\nexport default Navigation;","const lockScroll = () => {\n    const $body = document.querySelector('body');\n    let scrollPosition = 0;\n    let disabled = false;\n  \n    return {\n      disable(callback) {\n        if (!disabled) {\n          disabled = !disabled;\n          scrollPosition = window.pageYOffset;\n          $body.style.overflow = 'hidden';\n          $body.style.position = 'fixed';\n          $body.style.top = `-${scrollPosition}px`;\n          $body.style.width = '100%';\n  \n          if (callback && typeof callback === 'function') {\n            callback(scrollPosition);\n          }\n        }\n      },\n      enable(callback) {\n        if (disabled) {\n          disabled = !disabled;\n          $body.style.removeProperty('overflow');\n          $body.style.removeProperty('position');\n          $body.style.removeProperty('top');\n          $body.style.removeProperty('width');\n          window.scrollTo({\n            top: scrollPosition,\n            behavior: 'instant',\n          });\n          if (callback && typeof callback === 'function') {\n            callback();\n          }\n        }\n      },\n    };\n  };\n  \nexport default lockScroll;\n  ","const getParentNode = (startPoint, targetSelector) => {\n\n  const getParent = (node) => {\n    const parent = node.parentElement;\n\n    if (parent) {\n        return parent.classList.contains(targetSelector) ? parent : getParent(parent);\n    } else {\n        return null;\n    }\n  };\n\n  return getParent(startPoint);\n}\n\nexport default getParentNode;","import Navigation from './menu-plugin/SlideMenu.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const nav = new Navigation();\n  nav.init();\n});\n\n"],"names":["$body","scrollPosition","disabled","header","document","querySelector","wrp","btn","close","isLastVisible","querySelectorAll","isOpen","depth","scroll","disable","callback","window","pageYOffset","style","overflow","position","top","width","enable","removeProperty","scrollTo","behavior","open","classList","toggle","body","add","controlHandler","addEventListener","remove","forEach","item","clearLastLevel","html","init","e","startPoint","targetSelector","ww","innerWidth","target","dataset","show","isLastLevel","nextElementSibling","contains","menu","createElement","appendChild","timeout","setTimeout","clearTimeout","handleLastLevel","cloneNode","preventDefault","action","getParent","node","parent","parentElement","Navigation"],"sourceRoot":""}